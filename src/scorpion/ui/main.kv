#:kivy 1.8.0
#:import utils scorpion.utils

<StartScreen_LiquorView>:
  canvas.before:
    Color: 
      rgba: 0.5, 0.2, 0.5, 1
    BorderImage:
      source: utils.get_misc_image_path("round.png")
      pos: self.pos
      size: self.size
  orientation: 'vertical'
  size_hint_x: None
  width: '5cm'
  AsyncImage:
    id: display_image
  Label:
    id: display_name
    size_hint_y: 0.2

<StartScreen>:
  canvas.before:
    Color:
      rgba: 1, 0, 0, 1
    Rectangle:
      pos: self.pos
      size: self.size
  name: 'startscreen'
  BoxLayout:
    orientation: 'vertical'
    ScrollView:
      do_scroll_y: False
      GridLayout:
        id: liquor_holder
        padding: 20
        spacing: 10
        rows: 1
        size_hint_x: None
        width: self.minimum_width
    Button:
      text: 'Mix a Drink!'
      size_hint_y: 0.3
      on_release: app.root.current = 'drinkselectscreen'
    Button:
      text: 'Add a drink to inventory'
      size_hint_y: 0.2
      on_release: app.start_add_new_bottle()

<LiquorScreen_LiquorView>:
  size_hint_x: None
  width: '5cm'

<LiquorScreen_DrinkView>:
  canvas.before:
    Color: 
      rgba: 0.5, 0.2, 0.5, 1
    BorderImage:
      source: utils.get_misc_image_path("round.png")
      pos: self.pos
      size: self.size
  orientation: 'vertical'
  size_hint_x: None
  width: '5cm'
  AsyncImage:
    id: drink_image
  Label:
    size_hint_y: 0.2
    id: drink_name

<LiquorScreen>:
  name: 'liquorscreen'
  BoxLayout:
    orientation: 'vertical'
    BoxLayout:
      orientation: 'horizontal'
      BoxLayout:
        size_hint_x: 0.4
        orientation: 'vertical'
        AsyncImage:
          id: liquor_image
        Label:
          id: date_added
          size_hint_y: 0.1
        Label:
          id: volume
          size_hint_y: 0.1
      BoxLayout:
        orientation: 'vertical'
        Label:
          size_hint_y: 0.3
          id: brand_info
        ScrollView:
          do_scroll_y: False
          GridLayout:
            id: drink_list
            padding: 20
            spacing: 10
            rows: 1
            size_hint_x: None
            width: self.minimum_width
        Label:
          size_hint_y: 0.3
          text: 'Liquor history not yet implemented'
    Button:
      size_hint_y: 0.1
      text: 'back to start'
      on_release: app.root.current = 'startscreen'

<MixingScreen_IngrView>:
  size_hint_x: None
  width: '5cm'

<MixingScreen>:
  name: 'mixingscreen'
  BoxLayout:
    orientation: 'vertical'
    BoxLayout:
      orientation: 'horizontal'
      BoxLayout:
        orientation: 'vertical'
        Label:
          id: drink_name
        AsyncImage:
          id: drink_image
        RstDocument: 
          id: drink_descr
      BoxLayout:
        orientation: 'vertical'
        RstDocument:
          id: drink_instr
        BoxLayout:
          id: drink_ingr_list
          orientation: 'horizontal'
    Button:
      size_hint_y: 0.1
      text: 'Back to start'
      on_release: app.root.current = 'startscreen'

<DrinkSelectScreen_DrinkView>:
  size_hint_x: None
  width: '5cm'

<DrinkSelectScreen>:
  name: 'drinkselectscreen'
  drink_list: drink_list
  BoxLayout:
    orientation: 'vertical'
    ScrollView:
      do_scroll_y: False
      GridLayout:
        id: drink_list
        padding: 20
        spacing: 10
        rows: 1
        size_hint_x: None
        width: self.minimum_width
    Button:
      size_hint_y: 0.1
      text: 'back to start'
      on_release: app.root.current = 'startscreen'

#################################
#Screens for entering new bottles
#################################

<UPCGetScreen>:
  name: 'upcgetscreen'
  BoxLayout:
    size_hint_y: 0.4
    orientation: 'vertical' 
    pos_hint: {'top':1}
    Label:
      text: 'Scan barcode or enter here.'
      size_hint: (1,0.2)
    IntegerInput:
      id: upc_input
      size_hint: (0.7,0.2) 
      pos_hint: {'center_x':0.5}
      font_size: (self.height * 2) // 3
      multiline: False
      on_text: self.on_text(self,self.text); root.on_text(self,self.text)
    BoxLayout:
      orientation: 'horizontal'
      size_hint: (0.8,0.2) 
      pos_hint: {'center_x': 0.5}
      Button:
        id: done_button
        text: 'Done'
        disabled: True
        on_release: root.done()
      Button:
        text: 'Back'
        on_release: app.popup.dismiss()

<ListSelectionScreen>:
  BoxLayout:
    orientation: 'vertical'
    Label:
      size_hint_y: 0.1
      text: root.top_text
    ScrollView:
      size_hint_y: 0.8
      do_scroll_x: False
      GridLayout:
        id: list_
        padding: 20
        spacing: 10
        cols: 1
        size_hint_y: None
        height: self.minimum_height
    BoxLayout:
      orientation: 'horizontal'
      size_hint_y: 0.1
      Button:
        text: 'Done'
        disabled: root.done_disabled
        on_release: root.done()
      Button:
        text: 'None of These'
        on_release: root.none()
      Button:
        text: 'Back'
        on_release: root.back()
        
<BrandCreationScreen>:
  name: 'brandcreationscreen'
  BoxLayout:
    orientation: 'vertical'
    size_hint_y: 0.5
    pos_hint: {'top':1}
    spacing: 10
    Label: 
      size_hint_y: 0.25
      text: 'Please share some info about this brand.'
    GridLayout:
      size_hint_y: 0.5
      rows: 2
      cols: 2
      Label:
        text: 'Brand Name'
        font_size: (self.height*2) // 3
      TextInput:
        id: name_input
        font_size: (self.height*2) // 3
        multiline: False
      Label:
        text: 'Country of Origin'
        font_size: (self.height*2) // 3
      TextInput:
        id: country_input
        font_size: (self.height*2) // 3
        multiline: False
    BoxLayout:
      pos_hint: {'center_x':0.5}
      size_hint_y: 0.25
      Button:
        text: 'Done'
        on_release: root.create_brand()
      Button:
        text: 'Back'
        on_release: root.back()
      

<TypeCreationScreen>:
  name: 'typecreationscreen'
  BoxLayout:
    orientation: 'vertical'
    size_hint_y: 0.5
    pos_hint: {'top':1}
    spacing: 10
    Label: 
      size_hint_y: 0.2
      text: 'Please provide some info about this type of liquor.'
    BoxLayout:
      size_hint_y: 0.2
      orientation: 'horizontal'
      Label:
        text: 'Type Name'
      TextInput:
        id: name_input
        multiline: False
    BoxLayout:
      orientation: 'horizontal'
      size_hint_y: 0.4
      Label:
        text: 'Short Description'
      TextInput:
        id: description_input
    BoxLayout:
      pos_hint: {'center_x':0.5}
      size_hint_y: 0.25
      Button:
        text: 'Done'
        on_release: root.create_type()
      Button:
        text: 'Back'
        on_release: root.back()
      
<LiquorCreationScreen>:
  name: 'liquorcreationscreen'
  BoxLayout:
    orientation: 'vertical'
    size_hint_y: 0.5
    pos_hint: {'top':1}
    spacing: 10
    Label: 
      size_hint_y: 0.2
      text: 'Please provide some info about new liquor.'
    BoxLayout:
      size_hint_y: 0.3
      orientation: 'horizontal'
      Label:
        text: 'Name of Liquor'
      TextInput:
        id: name_input
        multiline: False
    BoxLayout:
      orientation: 'horizontal'
      size_hint_y: 0.3
      Label:
        text: 'ABV(eg. 40)'
      IntegerInput:
        id: abv_input
        multiline: False
    BoxLayout:
      orientation: 'horizontal'
      pos_hint: {'center_x': 0.5}
      size_hint_y: 0.2
      Button:
        text: 'Done'
        on_release: root.create_liquor()
      Button:
        text: 'Back'
        on_release: root.back()
      
<LiquorSKUCreationScreen>:
  name: 'liquorskucreationscreen'
  BoxLayout:
    orientation: 'vertical'
    size_hint_y: 0.3
    pos_hint: {'top':1}
    spacing: 10
    Label: 
      size_hint_y: 0.2
      text: 'Please provide some info about new liquor.'
    BoxLayout:
      size_hint_y: 0.3
      orientation: 'horizontal'
      Label:
        text: 'Volume of bottle(mL)'
      FloatInput:
        id: volume_input
        multiline: False
    BoxLayout:
      orientation: 'horizontal'
      pos_hint: {'center_x': 0.5}
      size_hint_y: 0.2
      Button:
        text: 'Done'
        on_release: root.create_liquorSKU()
      Button:
        text: 'Back'
        on_release: root.back()
